[include base_display_off.cfg]

[zmod_color]
display: False

[zmod_ifs]
debug: False

[zmod_ifs_motion_sensor ifs_motion_sensor]
pause_on_runout: True
runout_gcode:
    RESPOND TYPE=error MSG="===Filament runout or jam detected=== (IFS)"

[zmod_ifs_switch_sensor head_switch_sensor]
pause_on_runout: True
runout_gcode:
        RESPOND TYPE=error MSG="===Filament runout detected=== (Head)"

[gcode_macro CHANGE_FILAMENT]
gcode:
    {% set channel  = params.CHANNEL| int %}

    SET_FILAMENT_SENSOR SENSOR=head_switch_sensor ENABLE=0
    SET_FILAMENT_SENSOR SENSOR=ifs_motion_sensor ENABLE=0

    RESPOND PREFIX="info" MSG="T{channel}"
    _CHANGE_FILAMENT CHANNEL={channel}

    SET_FILAMENT_SENSOR SENSOR=head_switch_sensor ENABLE=1
    SET_FILAMENT_SENSOR SENSOR=ifs_motion_sensor ENABLE=1
